(this.webpackJsonpbattleship=this.webpackJsonpbattleship||[]).push([[0],{20:function(e,t,a){e.exports=a(34)},25:function(e,t,a){},34:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(17),c=a.n(i),l=(a(25),a(8)),s=a(2),o=a(6),m=a(1),u=a(19),d=function(e,t){switch(t.type){case"ADD_PLAYER":return[].concat(Object(u.a)(e),[{player:t.player.name,id:t.player.id,enemyTiles:t.player.enemyTiles,personalTiles:t.player.personalTiles,tilesSunk:0}]);case"MISS":return e.map((function(e){return e.id===t.player.enemyId?e:Object(m.a)(Object(m.a)({},e),{},{enemyTiles:e.enemyTiles.map((function(e){return e.x===t.player.x&&e.y===t.player.y?Object(m.a)(Object(m.a)({},e),{},{isSplash:!0}):e}))})}));case"HIT":return e.map((function(e){return e.id===t.player.enemyId?Object(m.a)(Object(m.a)({},e),{},{personalTiles:e.personalTiles.map((function(e){return e.x===t.player.x&&e.y===t.player.y?Object(m.a)(Object(m.a)({},e),{},{isHit:!0}):e}))}):Object(m.a)(Object(m.a)({},e),{},{enemyTiles:e.enemyTiles.map((function(e){return e.x===t.player.x&&e.y===t.player.y?Object(m.a)(Object(m.a)({},e),{},{isHit:!0}):e})),tilesSunk:e.tilesSunk+1})}));case"RESET":return[];default:return e}},f=Object(n.createContext)(),p=function(e){var t=Object(n.useReducer)(d,[],(function(){var e=localStorage.getItem("battleship");return e?JSON.parse(e):[]})),a=Object(o.a)(t,2),i=a[0],c=a[1];Object(n.useEffect)((function(){localStorage.setItem("battleship",JSON.stringify(i))}),[i]);return r.a.createElement(f.Provider,{value:{game:i,dispatch:c,resetGame:function(){c({type:"RESET"})},sinkTile:function(e,t,a){c({type:"HIT",player:{enemyId:a,x:e,y:t}})},missedShot:function(e,t,a){c({type:"MISS",player:{enemyId:a,x:e,y:t}})}}},e.children)},y=function(){return r.a.createElement("div",{className:"set-players-container"},r.a.createElement(l.b,{to:"/player-names"},r.a.createElement("button",{className:"set-players-btn"},"Set Players")))},b=a(36),v=function(){for(var e=["","","","","","","","","","",""],t=[],a=["","","","","","","","",""].length;a>=1;a--)for(var n=1;n<=e.length;n++)t.push({isFree:!0,isHit:!1,isSplash:!1,x:n,y:a});return t},h=function(e,t){if(t.direction)for(var a=function(a){var n=t.coordinates[0]+a,r=t.coordinates[1];if(!e.find((function(e){return e.x===n&&e.y===r})).isFree)return{v:!0}},n=0;n<t.length;n++){var r=a(n);if("object"===typeof r)return r.v}else for(var i=function(a){var n=t.coordinates[1]+a,r=t.coordinates[0];if(!e.find((function(e){return e.y===n&&e.x===r})).isFree)return{v:!0}},c=0;c<t.length;c++){var l=i(c);if("object"===typeof l)return l.v}return!1},E=function(e){var t=e.length-1,a=e.direction?e.coordinates[0]:e.coordinates[1];return!((e.direction?11:9)-(a+t)>0)};var O=[{text:"A",id:Object(b.a)()},{text:"B",id:Object(b.a)()},{text:"C",id:Object(b.a)()},{text:"D",id:Object(b.a)()},{text:"E",id:Object(b.a)()},{text:"F",id:Object(b.a)()},{text:"G",id:Object(b.a)()},{text:"H",id:Object(b.a)()},{text:"I",id:Object(b.a)()},{text:"J",id:Object(b.a)()},{text:"K",id:Object(b.a)()}],j=function(){for(var e=[],t=9;t>0;t--)e.push({text:t,id:Object(b.a)()});return e},g=function(){var e=Object(n.useState)(""),t=Object(o.a)(e,2),a=t[0],i=t[1],c=Object(n.useContext)(f),s=c.game,u=c.dispatch;c.winner;return 2===s.length?r.a.createElement("div",{className:"start-btn-container"},r.a.createElement(l.b,{to:"/play"},r.a.createElement("button",{className:"start-btn"},"Start Game"))):r.a.createElement("form",{onSubmit:function(e){e.preventDefault();var t=0===s.length?"A":"B",n=v(),r=v(),c=function(e){for(var t=e,a=1;a<=5;a++){var n=1===a?5:2===a||3===a?4:4===a?3:2,r={length:n,coordinates:[],direction:Math.random()>.5},i=void 0,c=void 0;do{r.coordinates=[Math.floor(11*Math.random())+1,Math.floor(9*Math.random())+1],i=!!(c=E(r))||h(t,r)}while(i||c);for(var l=0;l<n;l++)r.direction?function(){var e=r.coordinates[0]+l,a=r.coordinates[1];t=t.map((function(t){return t.x===e&&t.y===a?Object(m.a)(Object(m.a)({},t),{},{isFree:!1}):t}))}():function(){var e=r.coordinates[1]+l,a=r.coordinates[0];t=t.map((function(t){return t.y===e&&t.x===a?Object(m.a)(Object(m.a)({},t),{},{isFree:!1}):t}))}()}return t}(n);u({type:"ADD_PLAYER",player:{id:t,name:a,personalTiles:c,enemyTiles:r}}),i("")},className:"player-form"},r.a.createElement("label",{className:"name-label"},"Enter Name: "),r.a.createElement("input",{type:"text",name:"player",value:a,onChange:function(e){i(e.target.value)},placeholder:"Captain Morgan",className:"name-input"}),r.a.createElement("button",{className:"submit-form-btn"},"Submit"))},x=function(e){var t,a=e.tile,n=e.hitTile,i=e.nextTurn;a.isHit?t="black":a.isSplash&&(t="white");return r.a.createElement("div",{className:"tile",onClick:function(e){if(!a.isHit&&!a.isSplash){var t=n(a);"hit"===t?e.target.classList.add("hit"):"splash"===t&&e.target.classList.add("splash"),i()}},onMouseOver:function(e){a.isHit||a.isSplash||e.target.classList.add("hover")},onMouseOut:function(e){a.isHit||a.isSplash||e.target.classList.remove("hover")},style:{backgroundColor:t}})},N=function(e){var t=e.char;return r.a.createElement("div",{className:"letter"},t.text)},S=function(e){var t=e.num;return r.a.createElement("div",{className:"number"},t.text)},T=function(e){var t=e.thisPlayer,a=e.thisEnemy,i=e.nextTurn,c=e.winner,l=Object(n.useContext)(f),s=l.sinkTile,o=l.missedShot,m=j(),u=(t.playerInfo,t.enemyTiles),d=(a.enemyInfo,a.enemysPersonalTiles),p=a.id,y=function(e){var t=e.x,a=e.y,n=d.filter((function(e){return e.x===t&&e.y===a})),r=u.filter((function(e){return e.x===t&&e.y===a}));return n[0].isFree||r[0].isHit?!(!n[0].isFree||r[0].isHit||r[0].isSplash)&&(console.log("splash"),o(t,a,p),"splash"):(console.log("hit"),s(t,a,p),"hit")},b=u.map((function(e,t){return r.a.createElement(x,{key:t,tile:e,hitTile:y,nextTurn:i})})),v=O.map((function(e){return r.a.createElement(N,{key:e.id,char:e})})),h=m.map((function(e){return r.a.createElement(S,{key:e.id,num:e})}));return c.id.length>0?r.a.createElement("div",{className:"empty"}):r.a.createElement("div",{className:"tile-display"},r.a.createElement("h2",{className:"target-header"},"Choose a target"),r.a.createElement("div",{className:"numbers enemy"},h),r.a.createElement("div",{className:"tiles"},b),r.a.createElement("div",{className:"letters enemy"},v))},I=function(e){var t,a=e.tile;return t=a.isHit?"black":a.isFree?"rgb(123,199,247)":"rgb(150,18,6)",r.a.createElement("div",{className:"tile",style:{background:t}})},k=function(e){var t=e.thisPlayer,a=e.winner,n=e.loser,i=j(),c=t.playerInfo,l=c.personalTiles.map((function(e,t){return r.a.createElement(I,{key:t,tile:e})})),s=O.map((function(e){return r.a.createElement(N,{key:e.id,char:e})})),o=i.map((function(e){return r.a.createElement(S,{key:e.id,num:e})}));return a.id.length>0?r.a.createElement("div",{className:"game-result"},r.a.createElement("h1",null,"Congratulations to ",a.id," for defeating ",n.id,"!")):r.a.createElement("div",{className:"tile-display"},r.a.createElement("h2",null,"These are your ships, ",c.player),r.a.createElement("div",{className:"numbers"},o),r.a.createElement("div",{className:"tiles"},l),r.a.createElement("div",{className:"letters"},s))},w=function(){return r.a.createElement("div",{className:"loading-container"},r.a.createElement("h1",null,"...Loading next player"))},H=function(){var e=Object(n.useContext)(f).game,t=Object(n.useState)(!0),a=Object(o.a)(t,2),i=a[0],c=a[1],l=Object(n.useState)(0),s=Object(o.a)(l,2),u=s[0],d=s[1],p=Object(n.useState)(!1),y=Object(o.a)(p,2),b=y[0],v=y[1],h=Object(n.useState)({id:""}),E=Object(o.a)(h,2),O=E[0],j=E[1],g=Object(n.useState)({id:""}),x=Object(o.a)(g,2),N=x[0],S=x[1],I=Object(n.useState)({id:"B",playerInfo:[],enemyTiles:[]}),H=Object(o.a)(I,2),C=H[0],M=H[1],P=Object(n.useState)({id:"A",enemyInfo:[],enemysPersonalTiles:[]}),A=Object(o.a)(P,2),F=A[0],L=A[1];Object(n.useEffect)((function(){var t=setTimeout((function(){var t=B(C.id),a=e.filter((function(e){return e.id===t}));M(Object(m.a)(Object(m.a)({},C),{},{id:t,playerInfo:a[0],enemyTiles:a[0].enemyTiles}));var n=B(F.id),r=e.filter((function(e){return e.id===n}));L(Object(m.a)(Object(m.a)({},F),{},{id:n,enemyInfo:r[0],enemysPersonalTiles:r[0].personalTiles})),J()}),1400);return function(){return clearTimeout(t)}}),[u]),Object(n.useEffect)((function(){setTimeout((function(){var e=R();"winner"===e?G("winner"):"loser"===e&&G("loser"),D()}),1800)}),[b]);var B=function(e){return"A"===e?"B":"A"},D=function(){c(!i)},J=function(){v(!b)},R=function(){var e=18===F.enemyInfo.tilesSunk;return 18===C.playerInfo.tilesSunk?"winner":!!e&&"loser"},G=function(e){var t="winner"===e?C.playerInfo.player:F.enemyInfo.player,a=t===F.enemyInfo.player?C.playerInfo.player:F.enemyInfo.player;j(Object(m.a)(Object(m.a)({},O),{},{id:t})),S(Object(m.a)(Object(m.a)({},N),{},{id:a}))};return r.a.createElement("div",{className:"game-container"},i?r.a.createElement(w,null):r.a.createElement("div",{className:"game-display"},r.a.createElement("div",{className:"tile-container"},r.a.createElement(k,{thisPlayer:C,winner:O,loser:N}),r.a.createElement(T,{thisPlayer:C,thisEnemy:F,nextTurn:function(){D(),d(0===u?u+1:u-1)},winner:O,loser:N}))),O.id.trim()?r.a.createElement("div",{className:"empty"}):r.a.createElement("div",{className:"legend-container"},r.a.createElement("div",{className:"splash-info"},r.a.createElement("span",{className:"splash-text"},"Miss = "),r.a.createElement("div",{className:"splash-legend-tile"})),r.a.createElement("div",{className:"hit-info"},r.a.createElement("span",{className:"hit-text"},"Hit = "),r.a.createElement("div",{className:"hit-legend-tile"}))))},C=function(){var e=Object(n.useContext)(f),t=e.resetGame;return e.game.length<1?r.a.createElement("div",{className:"empty",style:{display:"none"}}):r.a.createElement("div",{className:"start-over-container"},r.a.createElement(l.b,{to:"/"},r.a.createElement("button",{onClick:t,className:"start-over-btn"},"Start Over")))};var M=function(){return r.a.createElement(l.a,null,r.a.createElement("div",{className:"App"},r.a.createElement(p,null,r.a.createElement(s.a,{exact:!0,path:"/",component:y}),r.a.createElement(C,null),r.a.createElement(s.a,{exact:!0,path:"/player-names",component:g}),r.a.createElement(s.a,{exact:!0,path:"/play",component:H}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(M,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[20,1,2]]]);
//# sourceMappingURL=main.e7f8ea63.chunk.js.map